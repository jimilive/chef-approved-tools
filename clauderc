# Chef Approved Tools - Claude Code Rules

**Last Updated:** November 3, 2025
**Project:** chefapprovedtools.com
**Owner:** Scott Bradley

---

## üö® READ THIS FIRST

This file contains **PERMANENT RULES** that must be followed at all times.

For project status ‚Üí Ask Scott (status changes frequently)

**Core Principle:** Preserve existing functionality. When in doubt, ASK before changing anything.

---

## ‚ö†Ô∏è ABSOLUTE RULES - NEVER VIOLATE

### Scripts & Automation
```
‚ùå NEVER run scripts that modify files without explicit approval
‚ùå NEVER bulk-update anything automatically
‚úÖ ALWAYS explain what a script will do in detail
‚úÖ ALWAYS explicitly state "this is a script"
‚úÖ ALWAYS wait for Scott's approval before executing

Rule: No scripts to change files. Ever. Unless Scott approves EACH TIME.
```

### Change Control
```
‚ùå NEVER make changes based on what you think is best
‚ùå NEVER update anything on your own initiative
‚úÖ ALWAYS get explicit approval before ANY change
‚úÖ ALWAYS explain WHAT you want to change and WHY
‚úÖ ALWAYS wait for Scott's green light

Rule: Nothing changes without Scott's explicit approval.
```

### Quality & Execution
```
‚úÖ ALWAYS be thorough - no shortcuts, no corners cut
‚úÖ ALWAYS be methodical - systematic execution
‚è∞ Time is NOT a concern - do it right, not fast
üí¨ Tokens are NOT a concern - use as many as needed
üß™ ALWAYS test build before pushing to production

Rule: Quality over speed. Every single time.
```

---

## üë®‚Äçüç≥ PROTECTED VALUES - NEVER CHANGE

### Scott's Credentials (Exact Wording Required)
```
‚úÖ "24 years of professional kitchen experience" ‚Üê Use this
‚úÖ "45 years total cooking experience" ‚Üê Minimize use
‚úÖ "Kitchen Manager at Mellow Mushroom"
‚úÖ "Kitchen Manager for 7 years over several restaurants"

‚ùå NOT "20 years" or "25 years"
‚ùå NOT "Kitchen Manager for 24 years"
‚ùå NOT any other timeline variations
```

**Schema.ts Author Credentials (DO NOT CHANGE):**
```typescript
// In schema.ts, Scott's author object uses:
jobTitle: "Kitchen Manager & Culinary Professional"
description: "Professional chef with 45 years of cooking experience and 24 years in restaurant management. A.A.S. Culinary Arts from Seattle Central College."
alumniOf: "Seattle Central College"
hasCredential: Associate degree in Culinary Arts
```

**Note:** Schema uses "45 years cooking / 24 years restaurant management" wording - this is intentional and correct.

### Restaurant Names (Real - Never Invent)
```
‚úÖ Mellow Mushroom (Kitchen Manager)
‚úÖ Purple Caf√© (Line Cook)
‚úÖ Feierabend (Line Cook)
‚úÖ Il Pizzaiolo (Line Cook)
‚úÖ Paragary's (Line Cook)
‚úÖ Seattle Central College (Culinary Education)

‚ùå NEVER invent other restaurant names or positions
```

### Affiliate Configuration
```
‚úÖ Amazon Associates Tag: chefapprovedt-20
‚úÖ Lead Magnet: "11 Tools I Use Most" PDF
‚úÖ Email Provider: ActiveCampaign

‚ùå NEVER change affiliate tag
‚ùå NEVER change lead magnet reference
```

---

## üõ†Ô∏è TECHNICAL ARCHITECTURE

### Tech Stack (Non-Negotiable)
```
‚úÖ Next.js 14.2.32 (App Router, Server Components)
‚úÖ React 18.3.1
‚úÖ TypeScript 5.4.5 (strict mode, no 'any' without justification)
‚úÖ Tailwind CSS 3.4.1 (NO inline styles unless required by best practice)
‚úÖ Supabase 2.76.1+ (ALL dynamic data)
‚úÖ Vercel (deployment, with @vercel/analytics)
‚úÖ GitHub (version control)
‚úÖ VS Code (development)
```

### Dynamic Data Requirements
```
‚úÖ ALL pages MUST fetch from Supabase (not hardcoded)
‚úÖ ALL product data MUST come from Supabase
‚úÖ ALL affiliate links MUST be dynamic (one source of truth)
‚úÖ Sitemap MUST be dynamic
‚úÖ Homepage MUST be dynamic
‚úÖ Hub pages MUST be dynamic
```

### Design System
```
‚úÖ Use Tailwind classes exclusively (exceptions require approval)
‚úÖ Primary CTA: bg-gradient-to-r from-orange-600 to-red-600
‚úÖ Text links: text-orange-700 (accessibility - NOT orange-600)
‚úÖ Container max-width: 1280px
‚úÖ Mobile-first: Always design mobile first, enhance for desktop
```

**‚ö†Ô∏è CRITICAL - Color System Location:**
- Colors are NOT in `tailwind.config.js` (uses default Tailwind palette)
- All custom colors/styles are in `/app/globals.css`
- Never modify globals.css without testing Lighthouse scores
- Contains critical SVG sizing fixes - DO NOT REMOVE

---

## üîó AFFILIATE LINK PATTERNS - USE CORRECTLY

### Product Helper Functions (Import from @/lib/product-helpers)
```tsx
import { getProductBySlug, getPrimaryAffiliateLink } from '@/lib/product-helpers'
```

**CRITICAL:** The helper functions are in `/lib/product-helpers.ts`

**Available Functions:**
```typescript
// Get single product by slug
async function getProductBySlug(slug: string): Promise<Product | null>

// Get multiple products by slugs
async function getProductsBySlugs(slugs: string[]): Promise<Product[]>

// Get primary affiliate link from product object
function getPrimaryAffiliateLink(product: Product): string

// Get all products
async function getAllProducts(): Promise<Product[]>

// Get products by category
async function getProductsByCategory(category: string): Promise<Product[]>

// Get related products (excludes current, limited results)
async function getRelatedProducts(
  currentProductSlug: string,
  category: string,
  limit?: number // default: 3
): Promise<Product[]>

// Get best price vendor from product.vendors
function getBestPriceVendor(product: Product): Vendor | undefined
```

**How `getPrimaryAffiliateLink()` Works:**
1. Looks for affiliate link where `merchant === product.primaryAffiliate`
2. Falls back to first link in `affiliateLinks` array if primary not found
3. Falls back to `'#'` if no links exist
4. Returns URL string ready to use in `href`

---

### Pattern 1: Product Review Pages (Component System - ISR)

**Use for:** Core product review pages at `/app/reviews/[slug]/page.tsx`

```tsx
// Import review data from separate file
import { reviewData } from './product-slug-data'

// ISR configuration (NOT dynamic rendering)
export const revalidate = 3600         // 1 hour cache
export const fetchCache = 'force-cache'

export default async function ProductReview() {
  // Fetch product from Supabase (returns null if not found)
  const product = await getProductBySlug(reviewData.productSlug)

  // Merge Supabase with legacy fallback
  const productData = product ? {
    ...reviewData.legacyProductData,
    ...product
  } : reviewData.legacyProductData

  // Get affiliate link
  const affiliateUrl = product ? getPrimaryAffiliateLink(product) : '#'

  return (
    <>
      <ReviewHero {...reviewData.hero} />
      <TestingResultsGrid {...reviewData.testingResults} />
      {/* etc - use components from @/components/review */}
    </>
  )
}
```

**CRITICAL:** Review pages now use component/template system (see section below)

---

### Pattern 2: Multi-Product Pages (With Fallbacks)

**Use for:** Guide pages, comparison posts, hub pages with multiple products

```tsx
export default async function GuidePage() {
  // Fetch multiple products at once
  const products = await Promise.all([
    getProductBySlug('product-1'),
    getProductBySlug('product-2'),
    getProductBySlug('product-3'),
  ])

  // OR use getProductsBySlugs for cleaner code:
  // const products = await getProductsBySlugs(['product-1', 'product-2', 'product-3'])

  const product1Url = products[0]
    ? getPrimaryAffiliateLink(products[0])
    : 'https://amzn.to/fallback1'

  const product2Url = products[1]
    ? getPrimaryAffiliateLink(products[1])
    : 'https://amzn.to/fallback2'

  return (
    <>
      <a href={product1Url}>Product 1</a>
      <a href={product2Url}>Product 2</a>
    </>
  )
}

export const dynamic = 'force-dynamic'
```

---

### Pattern 3: Related Products Section

**Use for:** "You might also like" sections on review pages

```tsx
export default async function ProductReview() {
  const product = await getProductBySlug('main-product-slug')

  // Get 3 related products from same category, excluding current
  const relatedProducts = await getRelatedProducts(
    product.slug,
    product.category,
    3 // limit (optional, default is 3)
  )

  return (
    <div>
      <h2>Related Products</h2>
      {relatedProducts.map(related => (
        <Link key={related.id} href={`/reviews/${related.slug}`}>
          {related.name}
        </Link>
      ))}
    </div>
  )
}
```

---

## ‚öôÔ∏è PERFORMANCE & SECURITY

### Next.js Config Critical Settings

**‚ö†Ô∏è NEVER modify these without explicit approval and Lighthouse testing:**

```javascript
// next.config.js - Performance Optimizations
const nextConfig = {
  images: {
    formats: ['image/avif', 'image/webp'],
    deviceSizes: [640, 750, 828, 1080, 1200, 1920, 2048, 3840],
    imageSizes: [16, 32, 48, 64, 96, 128, 256, 384],
    minimumCacheTTL: 60,
  },

  // Security headers
  async headers() {
    return [
      {
        source: '/:path*',
        headers: [
          {
            key: 'X-DNS-Prefetch-Control',
            value: 'on'
          },
          {
            key: 'Strict-Transport-Security',
            value: 'max-age=31536000; includeSubDomains'
          },
          // ... etc
        ],
      },
    ]
  },
}
```

**Why these matter:**
- Image optimization: Reduces load times, improves LCP
- Security headers: Prevents XSS, clickjacking
- Cache settings: Balances freshness with performance

**Before changing next.config.js:**
1. Testing Lighthouse scores before/after
2. Verifying redirects still work
3. Checking CSP doesn't break analytics
4. Confirming image optimization settings

**Tailwind Config:**
- Uses DEFAULT Tailwind theme (no custom colors in config)
- All color customization in globals.css
- Simple content paths only

---

## üîÑ DEVELOPMENT WORKFLOW

### Before Committing
```
‚úÖ Test locally (npm run dev)
‚úÖ Build succeeds (npm run build) - includes prebuild validation
‚úÖ Lighthouse scores verified (95+) - CRITICAL after recent optimizations
‚úÖ Run validation suite: npm run validate:all
‚úÖ Mobile responsive checked
‚úÖ Affiliate links tested (click through to Amazon)
‚úÖ No TypeScript errors (npm run type-check)
‚úÖ No console errors
‚úÖ Schema markup validates (use Google Rich Results Test)
```

**Available Validation Scripts (use these!):**
```bash
npm run validate:all        # Run all validations
npm run validate:db         # Validate database integrity
npm run validate:images     # Validate image optimization
npm run validate:links      # Validate affiliate links
npm run validate:duplicates # Check for duplicate links
npm run type-check          # TypeScript validation
npm run lighthouse          # Performance testing
```

### Commit Message Format
```
feat: add new product review page
fix: broken affiliate link on cast iron page
refactor: optimize image loading
docs: update README
style: adjust accessibility colors
perf: reduce bundle size
```

### Git Rules
```
‚ùå NEVER modify .github/workflows without permission
‚ùå NEVER force push without consultation
‚ùå NEVER skip prebuild validation (runs automatically on npm run build)
‚úÖ ALWAYS write descriptive commit messages
‚úÖ ALWAYS test before committing
‚úÖ ALWAYS run npm run validate:all before major commits
```

---

## üö´ COMMON MISTAKES - AVOID THESE

### Content Mistakes
```
‚ùå Changing "24 years" to any other number
‚ùå Saying "Kitchen Manager for 24 years" (it was 7 years)
‚ùå Inventing fake restaurant stories
‚ùå Using generic AI phrases
‚ùå Changing Scott's authentic voice
```

### Technical Mistakes
```
‚ùå Converting Tailwind to inline styles
‚ùå Hardcoding affiliate links in JSX
‚ùå Using export const dynamic = 'force-dynamic' for review pages (use ISR)
‚ùå Importing from @/lib/affiliate-links (doesn't exist, use product-helpers)
‚ùå Adding dependencies that bloat bundle
‚ùå Breaking schema markup
‚ùå Removing ProductViewTrackerWrapper or CTAVisibilityTracker
```

### SEO Mistakes
```
‚ùå Removing meta descriptions or alt text
‚ùå Breaking internal links
‚ùå Changing publish dates
‚ùå Deleting existing content
‚ùå Breaking schema markup (use validators!)
```

### Performance Mistakes
```
‚ùå Removing Next.js Image components
‚ùå Adding inline styles that hurt Lighthouse scores
‚ùå Breaking lazy loading
‚ùå Removing width/height from images (causes CLS)
‚ùå Not testing Lighthouse after changes
```

### Process Mistakes
```
‚ùå Running scripts without approval
‚ùå Making "improvements" without asking
‚ùå Assuming you know what's best
‚ùå Cutting corners to save time
‚ùå Copying code patterns from old review pages (they're inconsistent!)
‚ùå Using any review page except Benriner as a reference
```

### Review Page Mistakes (NEW)
```
‚ùå Using old Vitamix architecture instead of Benriner component system
‚ùå Hardcoding content in page.tsx instead of data file
‚ùå Creating custom HTML when standard component exists
‚ùå Using export const dynamic = 'force-dynamic' instead of ISR
‚ùå Not separating data from presentation
‚ùå Mixing old and new patterns
‚ùå Page.tsx file over 500 lines (means content not properly separated)
‚ùå Not using all standard components (ReviewHero, TestingResultsGrid, etc)
‚ùå Forgetting ISR configuration (revalidate + fetchCache)
```

---

## üìû WHEN YOU DON'T KNOW

```
If unsure about ANYTHING:

1. STOP - Don't guess or assume
2. ASK SCOTT - Explain what and why
3. WAIT - Don't proceed without approval
4. DOCUMENT - Add learnings to this file
```

Better to ask than to break 300+ hours of work.

---

## üÜò IF YOU BREAK SOMETHING

```
1. Immediately notify Scott
2. Explain what changed (be specific)
3. Provide rollback steps (git revert commands)
4. Document root cause
5. Update this file with prevention rules
```

Don't try to cover up mistakes. Be transparent immediately.

---

## üí° WORKING WITH SCOTT

### Communication Style
```
‚úÖ Direct and concise (no fluff)
‚úÖ Provide immediate next steps
‚úÖ Action-oriented recommendations
‚úÖ Ask clarifying questions if unclear
‚ùå Don't over-explain simple things
‚ùå Don't apologize excessively
```

### Scott's Work Style
```
- Intensive "kitchen mode" sessions (17+ hours)
- ADHD - needs structure, clear tasks
- Prefers systematic execution
- Frustrated by incomplete solutions
- Values quality over speed
- Reviews code word-for-word before deployment
```

---

## üìö REFERENCE DOCUMENTATION

**Review Page Gold Standard (Updated November 3, 2025):**

```
‚úÖ Benriner review page = THE NEW STANDARD (component/template system)
‚úÖ /app/reviews/benriner-large-mandoline/page.tsx
‚úÖ Uses reusable components from @/components/review
‚úÖ Separates content (data file) from presentation (components)
‚úÖ ISR caching for performance (revalidate: 3600 = 1 hour)
‚úÖ Lighthouse scores 95-100 maintained

‚ùå Vitamix review page = OLD ARCHITECTURE (needs rebuild using Benriner template)
‚ùå All other review pages (33 remaining) = OUTDATED (need component conversion)
```

**Why Benriner is the New Standard:**
- Component/template architecture (scalable)
- Content separated from code (easier updates)
- ISR caching (better performance than dynamic)
- Reusable components (consistency across 35+ pages)
- 440 lines vs 1000 lines (56% reduction)
- Type-safe data structure
- Custom sections support (product-specific needs)

**This file (.clauderc) contains:** Core rules, protected values, workflow requirements

**Other docs contain:** Detailed implementation guidance and best practices

---

## üîß REVIEW PAGE COMPONENT/TEMPLATE SYSTEM

### Architecture Overview

Every review page uses this structure:

```
app/reviews/[product-slug]/
‚îú‚îÄ‚îÄ page.tsx                        # 400-500 lines: composition only
‚îî‚îÄ‚îÄ [product-slug]-data.ts          # All content and configuration
```

**page.tsx responsibilities:**
- Import components from @/components/review
- Import reviewData from data file
- Fetch product from Supabase
- Compose page from components
- NO hardcoded content

**data file responsibilities:**
- All copy, headings, descriptions
- Product-specific configuration
- FAQ data, testing notes
- Legacy product fallback data
- Type-safe structure

---

### Required Components (All Review Pages)

```typescript
import {
  ReviewHero,              // Title, rating, verdict, CTA
  TestingResultsGrid,      // Testing environment, key findings
  PerformanceAnalysis,     // Detailed performance sections
  ProsConsGrid,            // Pros and cons
  WhoShouldBuyGrid,        // Perfect for / Consider alternatives
  FAQSection,              // FAQs with schema markup
  EmailCaptureSection,     // Lead magnet signup
  BottomLineSection,       // Final recommendation + CTA
  RelatedProductsGrid      // Related products
} from '@/components/review'
```

**Every review page must use ALL of these components** unless there's a specific reason to omit one.

---

### Optional Custom Components

For product-specific needs, create custom components in:
```
@/components/review/custom/
```

**Examples:**
- SafetySection (sharp tools like mandolines, knives)
- CompatibilityGuide (mandoline vegetable guide, processor blade guide)
- ComparisonTable (vs competitors)
- MaintenanceGuide (complex equipment)
- SizeSelector (products with multiple sizes)

**Rule:** Only create custom components when standard components can't handle the content.

---

### ISR Configuration (CRITICAL)

```typescript
// At top of page.tsx - REQUIRED for all review pages

// Revalidate every hour (good balance for price changes)
export const revalidate = 3600  // 1 hour in seconds

// Enable fetch caching for Supabase
export const fetchCache = 'force-cache'
```

**DO NOT use:**
```typescript
‚ùå export const dynamic = 'force-dynamic'  // Old pattern, worse performance
```

**Why ISR is better:**
- First request: Server-rendered, cached for 1 hour
- Next requests: Served from cache (much faster)
- Supabase queries cached (reduces database load)
- Better Lighthouse scores
- Lower hosting costs (less compute time)

**When to revalidate:**
- 3600 (1 hour): Standard for most products
- 7200 (2 hours): Stable products, rarely change
- 1800 (30 min): Popular products with frequent price changes

---

### Step-by-Step: Creating a New Review Page

**1. Check Existing Components**
```bash
ls components/review/
```
Don't reinvent the wheel - use what exists.

**2. Create Data File**
```typescript
// app/reviews/[product-slug]/[product-slug]-data.ts

export const reviewData = {
  productSlug: 'product-name',

  metadata: {
    title: 'Product Name Review: Professional Testing',
    description: '...',
    ogTitle: '...',
    ogDescription: '...',
    testingPeriod: '5+ years',
    tier: 1
  },

  hero: {
    title: 'Product Name: Subtitle',
    authorName: 'Scott Bradley',
    authorCredentials: '24 years professional kitchen experience',
    rating: 4.8,
    tierBadge: 'Tier 1: 5+ Years Professional Use',
    verdict: 'Main verdict text...',
    verdictStrong: 'Strong opening line',
    ctaText: 'View on Amazon ‚Üí'
  },

  testingResults: {
    title: 'Testing Results',
    sections: [ ... ],
    testingEnvironment: '...',
    outstandingPerformance: [ ... ],
    minorConsiderations: [ ... ]
  },

  performanceAnalysis: {
    title: 'Performance Analysis',
    sections: [ ... ]
  },

  prosConsTitle: 'The Bottom Line',
  prosTitle: 'What Makes It Exceptional',
  consTitle: 'What to Consider',

  whoShouldBuy: {
    title: 'Who Should Buy This?',
    perfectForTitle: 'Perfect For:',
    considerAlternativesTitle: 'Consider Alternatives If:',
    perfectFor: [ ... ],
    considerAlternatives: [ ... ]
  },

  faq: {
    title: 'Common Questions',
    items: [ ... ]
  },

  whereToBuy: {
    title: 'Where to Buy',
    introText: '...',
    disclaimer: '...'
  },

  emailCapture: {
    title: '...',
    subtitle: '...',
    inputPlaceholder: 'Your email',
    buttonText: 'Get Free Guide',
    finePrint: '...'
  },

  bottomLine: {
    title: 'Bottom Line',
    paragraphs: [ ... ],
    ctaText: 'View on Amazon ‚Üí'
  },

  relatedProducts: {
    title: 'You Might Also Like',
    products: [ ... ]
  },

  legacyProductData: {
    // Fallback if Supabase is down
    name: '...',
    slug: '...',
    brand: '...',
    pros: [ ... ],
    cons: [ ... ],
    // ... etc
  },

  tracking: {
    // For ProductViewTrackerWrapper
    testingPeriod: '5+ years',
    hook: '...'
  },

  breadcrumb: {
    productName: 'Product Name'
  },

  faqData: [
    // For FAQ schema markup
    { question: '...', answer: '...' }
  ]
}
```

**Reference:** Use Benriner data file as template

**3. Create Page File**
```typescript
// app/reviews/[product-slug]/page.tsx

import Link from 'next/link'
import type { Metadata } from 'next'
import { getProductBySlug, getPrimaryAffiliateLink } from '@/lib/product-helpers'
import { generateProductSchema, generateBreadcrumbSchema, generateFAQSchema } from '@/lib/schema'
import { generateOGImageURL } from '@/lib/og-image'
import ProductViewTrackerWrapper from '@/components/ProductViewTrackerWrapper'
import {
  ReviewHero,
  TestingResultsGrid,
  PerformanceAnalysis,
  ProsConsGrid,
  WhoShouldBuyGrid,
  FAQSection,
  EmailCaptureSection,
  BottomLineSection,
  RelatedProductsGrid
} from '@/components/review'

// Import custom sections if needed
// import SafetySection from '@/components/review/custom/SafetySection'

// Import review data
import { reviewData } from './product-slug-data'

// ISR configuration
export const revalidate = 3600
export const fetchCache = 'force-cache'

// Generate metadata
export async function generateMetadata(): Promise<Metadata> {
  const product = await getProductBySlug(reviewData.productSlug)
  const productData = product || reviewData.legacyProductData

  return {
    title: reviewData.metadata.title,
    description: reviewData.metadata.description,
    alternates: {
      canonical: `https://www.chefapprovedtools.com/reviews/${reviewData.productSlug}`,
    },
    openGraph: {
      title: reviewData.metadata.ogTitle,
      description: reviewData.metadata.ogDescription,
      url: `https://www.chefapprovedtools.com/reviews/${reviewData.productSlug}`,
      siteName: 'Chef Approved Tools',
      images: [{
        url: generateOGImageURL({
          title: productData.name,
          rating: productData.expertRating ?? reviewData.hero.rating,
          testingPeriod: reviewData.metadata.testingPeriod,
          tier: reviewData.metadata.tier as 1 | 2 | 3,
        }),
        width: 1200,
        height: 630,
        alt: `${productData.name} - Professional Review`,
      }],
      type: 'article',
    },
    twitter: {
      card: 'summary_large_image',
      title: reviewData.metadata.ogTitle,
      description: reviewData.metadata.ogDescription,
      images: [generateOGImageURL({ /* same as openGraph */ })],
    },
  }
}

export default async function ProductReview() {
  // Get product from Supabase
  const product = await getProductBySlug(reviewData.productSlug)

  // Merge Supabase data with legacy (Supabase priority)
  const productData = product ? {
    ...reviewData.legacyProductData,
    ...product,
    pros: product.pros?.length > 0 ? product.pros : reviewData.legacyProductData.pros,
    cons: product.cons?.length > 0 ? product.cons : reviewData.legacyProductData.cons,
  } : reviewData.legacyProductData

  // Get affiliate link
  const affiliateUrl = product ? getPrimaryAffiliateLink(product) : '#'

  // Generate schemas
  const productSchema = generateProductSchema({ /* ... */ })
  const breadcrumbSchema = generateBreadcrumbSchema([ /* ... */ ])
  const faqSchema = generateFAQSchema(reviewData.faqData)

  return (
    <>
      {/* Schema markup */}
      <script type="application/ld+json" dangerouslySetInnerHTML={{ __html: JSON.stringify(productSchema) }} />
      <script type="application/ld+json" dangerouslySetInnerHTML={{ __html: JSON.stringify(breadcrumbSchema) }} />
      <script type="application/ld+json" dangerouslySetInnerHTML={{ __html: JSON.stringify(faqSchema) }} />

      {/* Tracking */}
      <ProductViewTrackerWrapper
        slug={productData.slug}
        name={productData.name}
        tier={reviewData.metadata.tier as 1 | 2 | 3}
        testingPeriod={reviewData.tracking.testingPeriod}
        rating={productData.expertRating}
        hook={reviewData.tracking.hook}
        category={productData.category}
      />

      <div className="bg-gray-50 min-h-screen">
        <div className="max-w-[900px] mx-auto px-5">

          {/* Breadcrumbs */}
          <div className="bg-white border-b border-gray-200 -mx-5 px-5 py-3 text-sm text-gray-600 mb-4">
            <Link href="/" className="hover:text-orange-700">Home</Link>
            {' / '}
            <Link href="/reviews" className="hover:text-orange-700">Reviews</Link>
            {' / '}
            {reviewData.breadcrumb.productName}
          </div>

          {/* Compose from components */}
          <ReviewHero {...reviewData.hero} />
          <TestingResultsGrid {...reviewData.testingResults} />
          <PerformanceAnalysis {...reviewData.performanceAnalysis} />

          {/* Custom sections if needed */}
          {/* <SafetySection {...reviewData.safety} /> */}

          <ProsConsGrid
            title={reviewData.prosConsTitle}
            prosTitle={reviewData.prosTitle}
            consTitle={reviewData.consTitle}
            pros={productData.pros}
            cons={productData.cons}
          />
          <WhoShouldBuyGrid {...reviewData.whoShouldBuy} />
          <FAQSection {...reviewData.faq} />
          <EmailCaptureSection {...reviewData.emailCapture} />
          <BottomLineSection {...reviewData.bottomLine} />
          <RelatedProductsGrid {...reviewData.relatedProducts} />

          {/* Author bio - standard across all pages */}
          {/* Copy from Benriner page */}

        </div>
      </div>
    </>
  )
}
```

**4. Test Locally**
```bash
npm run dev
# Visit localhost:3000/reviews/[product-slug]
```

**5. Verify Checklist**
```
‚ñ° Page loads without errors
‚ñ° All images have alt text
‚ñ° Affiliate link works (clicks through to Amazon)
‚ñ° Schema markup validates (Google Rich Results Test)
‚ñ° Mobile responsive (test on phone)
‚ñ° Lighthouse score 95+ (npm run lighthouse)
‚ñ° No TypeScript errors (npm run type-check)
‚ñ° ISR configuration present (revalidate + fetchCache)
‚ñ° ProductViewTrackerWrapper included
‚ñ° All standard components used
```

---

### Common Component System Mistakes - AVOID

**‚ùå Using Old Vitamix Structure**
```typescript
// DON'T DO THIS - old pattern
export const dynamic = 'force-dynamic'
const legacyProductData = { ... }  // Hardcoded in page file
// 900 lines of custom JSX
```

**‚ùå Hardcoding Content in Page File**
```typescript
// DON'T DO THIS
<h2>Testing Results</h2>
<p>After 5 years of use...</p>
```

**‚ùå Creating Custom HTML When Component Exists**
```typescript
// DON'T DO THIS
<div className="pros-cons-grid">
  <div className="pros">...</div>
  <div className="cons">...</div>
</div>

// DO THIS INSTEAD
<ProsConsGrid pros={...} cons={...} />
```

**‚ùå Not Using ISR**
```typescript
// DON'T DO THIS
export const dynamic = 'force-dynamic'

// DO THIS
export const revalidate = 3600
export const fetchCache = 'force-cache'
```

**‚ùå Mixing Data and Code**
```typescript
// DON'T DO THIS - data in page file
const hero = {
  title: '...',
  verdict: '...'
}

// DO THIS - data in separate file
import { reviewData } from './product-data'
```

---

### Migration Status

**‚úÖ Completed:**
- Benriner (November 2025) - New gold standard

**‚ö†Ô∏è Next Priority:**
- Vitamix - Rebuild using Benriner template

**‚è≥ Pending (33 pages):**
- All other review pages need component conversion
- Systematic rebuild, not rushed
- Use Benriner as exact template for each

**Target:** All 35 review pages using component system by Q1 2026

---

### When You Don't Know

```
If unsure about component/template system:

1. STOP - Don't guess structure
2. REFERENCE - Open Benriner page as template
3. COPY - Use same structure, different data
4. ASK - If something unclear, ask Scott
5. TEST - Lighthouse + type-check before commit
```

**Remember:** Benriner is the template. When in doubt, copy its structure exactly.

---

## üîê FINAL RULES

```
1. Preserve over improve
2. Ask before ANY changes
3. No scripts without approval (EACH TIME)
4. Test everything locally first
5. Quality over speed (always)
6. Lighthouse scores must stay 95+ (recently optimized)
7. Document decisions
8. When in doubt: STOP and ASK
9. Benriner component system for ALL review pages (no exceptions)
10. Separate data files for all content (no hardcoded copy in JSX)
11. ISR caching (revalidate: 3600) for review pages
```

---

## üéØ SUCCESS METRICS (Don't Break These)

**Current Baseline (November 2025):**
```
‚úÖ 78+ pages indexed in Google
‚úÖ Lighthouse scores 95-100 (RECENTLY OPTIMIZED)
‚úÖ Page load times <2.5 seconds
‚úÖ Zero hardcoded affiliate links
‚úÖ Amazon tag: chefapprovedt-20
‚úÖ Dynamic Supabase integration working
‚úÖ Schema markup validates
‚úÖ Analytics tracking functional (ProductViewTracker, CTAVisibilityTracker)
‚úÖ Component/template system established (Benriner standard)
```

If these decline after your changes, investigate immediately.

---

## üìã PRE-DEPLOYMENT CHECKLIST

```
Before deploying to production:

‚ñ° npm run build succeeds (includes prebuild validation)
‚ñ° npm run validate:all passes
‚ñ° npm run type-check passes (no TypeScript errors)
‚ñ° Lighthouse score 95+ (mobile and desktop) - TEST THIS
‚ñ° All images have alt text (npm run validate:images)
‚ñ° No console errors
‚ñ° Mobile responsive tested
‚ñ° Affiliate links use correct tag (chefapprovedt-20)
‚ñ° Affiliate links click through to Amazon successfully (npm run validate:links)
‚ñ° No duplicate affiliate links (npm run validate:duplicates)
‚ñ° Internal links working
‚ñ° Schema markup validates (Google Rich Results Test)
‚ñ° Meta tags complete (title, description, OG tags)
‚ñ° ProductViewTrackerWrapper present (if product page)
‚ñ° CTAVisibilityTracker present on CTAs (if applicable)
‚ñ° ISR configuration present (revalidate + fetchCache) for review pages
‚ñ° Review pages use component system (not old monolithic structure)
```

---

**Remember:** This is Scott's path to financial independence after job loss. Every decision matters. Quality, authenticity, and performance are non-negotiable.

**The Benriner review page is the NEW gold standard** - it uses the component/template system established in November 2025. All review pages need to be converted to this architecture.

**Future Work Identified:**
- Rebuild Vitamix using Benriner template (next priority)
- Rebuild 33 remaining review pages to component system
- Each rebuild should achieve Lighthouse 95+ scores
- All should use ISR caching (revalidate: 3600)
- All should include proper schema markup, tracking components

**When in doubt: STOP and ASK.**

---

*This file must be read by any AI assistant before working on Chef Approved Tools.*
*Last Updated: November 3, 2025*
*Verified against: /app/reviews/benriner-large-mandoline/page.tsx*
